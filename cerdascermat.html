<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Quiz Cerdas Cermat - Jenjang SMA</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--accent:#1e90ff;--muted:#9aa4b2;--success:#22c55e}
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui,Arial,sans-serif;background:linear-gradient(180deg,#071021 0%,#0f1724 100%);color:#e6eef6;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:24px}
    .container{width:100%;max-width:980px}
    .card{background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));padding:20px;border-radius:12px;box-shadow:0 8px 30px rgba(0,0,0,0.6)}
    header{display:flex;align-items:center;justify-content:space-between;gap:12px}
    h1{margin:0;font-size:20px}
    .meta{color:var(--muted);font-size:14px}
    .center{display:flex;align-items:center;justify-content:center}
    .start-panel{padding:28px;text-align:center}
    .btn{background:var(--accent);border:none;color:white;padding:12px 18px;border-radius:10px;font-weight:600;cursor:pointer}
    .btn.secondary{background:transparent;border:1px solid rgba(255,255,255,0.06)}
    .quiz{display:none;margin-top:16px}
    .qcard{background:rgba(255,255,255,0.02);padding:16px;border-radius:10px}
    .question{font-size:18px;margin-bottom:12px}
    .options{display:grid;gap:8px}
    .option{background:rgba(255,255,255,0.03);padding:12px;border-radius:8px;cursor:pointer;border:1px solid transparent}
    .option:hover{transform:translateY(-2px)}
    .option.selected{outline:2px solid rgba(30,144,255,0.18)}
    .footer{display:flex;align-items:center;justify-content:space-between;margin-top:12px}
    .timer{font-weight:700}
    .progress{height:8px;background:rgba(255,255,255,0.03);border-radius:6px;overflow:hidden}
    .progress > i{display:block;height:100%;background:linear-gradient(90deg,var(--accent),#6dd4ff);width:0%}
    .result{display:none;text-align:center;padding:20px}
    .leaderboard{margin-top:18px}
    table{width:100%;border-collapse:collapse}
    th,td{padding:8px;text-align:left;border-bottom:1px dashed rgba(255,255,255,0.03)}
    footer{margin-top:18px;text-align:center;color:var(--muted);font-size:13px}
    @media (max-width:640px){.question{font-size:16px}}
  </style>
</head>
<body>
  <div class="container">
    <div class="card">
      <header>
        <div>
          <h1>Quiz Cerdas Cermat - Jenjang SMA</h1>
          <div class="meta">10 soal | Pilihan ganda | Waktu tiap soal 30 detik</div>
        </div>
        <div class="center">
          <div style="text-align:right">
            <div class="meta">Skor: <span id="score">0</span></div>
            <div class="meta">Soal: <span id="qIndex">0</span>/<span id="qTotal">0</span></div>
          </div>
        </div>
      </header>

      <main>
        <section class="start-panel" id="startPanel">
          <p style="max-width:640px;margin:0 auto 18px;color:var(--muted)">Selamat datang! Klik tombol <strong>Mulai Kuis</strong> untuk memulai. Anda akan mendapatkan 1 menit per soal (default 30 detik, dapat diubah di pengaturan). Hasil tersimpan di leaderboard lokal.</p>
          <div style="display:flex;gap:8px;justify-content:center;flex-wrap:wrap">
            <button class="btn" id="startBtn">Mulai Kuis</button>
            <button class="btn secondary" id="settingsBtn">Pengaturan</button>
          </div>
        </section>

        <section class="quiz" id="quiz">
          <div class="qcard">
            <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap">
              <div>
                <div class="question" id="question">—</div>
                <div class="meta" id="category">Kategori: —</div>
              </div>
              <div style="min-width:160px;text-align:right">
                <div class="timer">Waktu: <span id="timer">30</span>s</div>
                <div class="progress" style="margin-top:8px"><i id="progressBar"></i></div>
              </div>
            </div>

            <div class="options" id="options" style="margin-top:14px"></div>

            <div class="footer">
              <div>
                <button class="btn secondary" id="prevBtn">Sebelumnya</button>
                <button class="btn secondary" id="nextBtn">Berikutnya</button>
              </div>
              <div>
                <button class="btn" id="submitBtn">Kirim Jawaban</button>
              </div>
            </div>
          </div>
        </section>

        <section class="result" id="result">
          <h2 id="resultTitle">Skor Anda</h2>
          <p id="resultSummary" style="color:var(--muted)"></p>
          <div style="margin-top:12px">
            <label for="playerName" class="meta">Masukkan nama untuk leaderboard:</label>
            <div style="display:flex;gap:8px;margin-top:6px">
              <input id="playerName" placeholder="Nama (mis. Farid)" style="flex:1;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit" />
              <button class="btn" id="saveScoreBtn">Simpan Skor</button>
            </div>
          </div>

          <div class="leaderboard" id="leaderboardWrap">
            <h3 style="margin-bottom:6px">Leaderboard (Lokal)</h3>
            <table id="leaderboardTable">
              <thead><tr><th>Rank</th><th>Nama</th><th>Skor</th></tr></thead>
              <tbody></tbody>
            </table>
          </div>

          <div style="margin-top:14px;display:flex;gap:8px;justify-content:center">
            <button class="btn secondary" id="retryBtn">Ulangi Kuis</button>
            <button class="btn secondary" id="homeBtn">Kembali ke Beranda</button>
          </div>
        </section>

      </main>

      <footer>
        Dibuat untuk latihan cerdas cermat SMA • Farid &amp; Alfino SMA Negeri Kabuh
      </footer>
    </div>
  </div>

  <script>
    // --- Soal kuis (contoh 10 soal jenjang SMA) ---
    const QUESTIONS = [
      {q:'Dalam biologi, organel sel yang bertanggung jawab untuk fotosintesis pada tumbuhan adalah...',a:['Mitokondria','Kloroplas','Ribosom','Badan Golgi'],correct:1,category:'Biologi'},
      {q:'Nilai dari 2sin(30°) + 3cos(60°) adalah...',a:['2','2.5','1.5','3'],correct:2,category:'Matematika'},
      {q:'Proklamasi Kemerdekaan Indonesia terjadi pada tanggal...',a:['17 Agustus 1945','20 Mei 1908','1 Juni 1945','10 November 1945'],correct:0,category:'Sejarah'},
      {q:'Arti kalimat: "He has been studying for three hours" adalah...',a:['Dia belajar tiga jam yang lalu','Dia sedang belajar tiga jam','Dia telah belajar selama tiga jam','Dia akan belajar tiga jam'],correct:2,category:'Bahasa Inggris'},
      {q:'Pernyataan yang benar tentang sistem peredaran darah manusia adalah...',a:['Vena membawa darah dari jantung','Atrium memompa darah ke tubuh','Aorta adalah arteri terbesar','Darah biru adalah darah kotor'],correct:2,category:'Biologi'},
      {q:'Jika f(x) = 2x² - 4x + 1, maka f(3) = ...',a:['7','11','13','5'],correct:0,category:'Matematika'},
      {q:'Salah satu penyebab runtuhnya Majapahit adalah...',a:['Invasi Mongol','Kedatangan Portugis','Perpecahan internal','Wabah penyakit'],correct:2,category:'Sejarah'},
      {q:'Passive voice dari: "They will finish the project tomorrow" adalah...',a:['The project will be finished by them tomorrow.','The project will have been finished tomorrow.','The project will be finished tomorrow.','The project is finished tomorrow.'],correct:2,category:'Bahasa Inggris'},
      {q:'Hukum Newton tentang aksi-reaksi adalah hukum nomor...',a:['1','2','3','0'],correct:2,category:'Fisika'},
      {q:'Metamorfosis sempurna terjadi pada...',a:['Belalang','Kupu-kupu','Cacing tanah','Tokek'],correct:1,category:'Biologi'},
      {q:'Unsur kimia dengan nomor atom 6 adalah...',a:['Oksigen','Karbon','Nitrogen','Helium'],correct:1,category:'Kimia'},
      {q:'Tokoh yang dikenal sebagai Bapak Ekonomi Indonesia adalah...',a:['Moh. Hatta','Ir. Soekarno','Tan Malaka','Sutomo'],correct:0,category:'Ekonomi'},
      {q:'Teks pidato yang bertujuan mengajak disebut...',a:['Persuasif','Eksposisi','Deskripsi','Narasi'],correct:0,category:'Bahasa Indonesia'},
      {q:'Planet terbesar di tata surya adalah...',a:['Bumi','Saturnus','Jupiter','Uranus'],correct:2,category:'Astronomi'},
      {q:'Dalam fisika, usaha (work) dihitung dengan rumus...',a:['W = F/d','W = F × s','W = m × a','W = P × t'],correct:1,category:'Fisika'},
      {q:'Virus pertama yang berhasil dikristalkan adalah...',a:['Influenza','TBC','HIV','TMV'],correct:3,category:'Biologi'},
      {q:'Puisi lama yang memiliki pola pantun adalah...',a:['Gurindam','Seloka','Syair','Pantun'],correct:3,category:'Sastra'},
      {q:'Bentuk pemerintahan Indonesia adalah...',a:['Monarki','Kesultanan','Republik','Imperium'],correct:2,category:'PPKn'},
      {q:'Sinonim kata "integritas" adalah...',a:['Kejujuran','Ambisi','Kreativitas','Kecepatan'],correct:0,category:'Bahasa Indonesia'},
      {q:'Bilangan 0,75 jika ditulis dalam bentuk pecahan adalah...',a:['3/4','2/3','4/5','7/10'],correct:0,category:'Matematika'}
    ];

    // Config
    let timePerQuestion = 30; // detik default

    // State
    let qIndex = 0;
    let score = 0;
    let timer = null;
    let timeLeft = timePerQuestion;
    let answers = Array(QUESTIONS.length).fill(null);

    // Elements
    const startPanel = document.getElementById('startPanel');
    const startBtn = document.getElementById('startBtn');
    const settingsBtn = document.getElementById('settingsBtn');
    const quizWrap = document.getElementById('quiz');
    const questionEl = document.getElementById('question');
    const optionsEl = document.getElementById('options');
    const categoryEl = document.getElementById('category');
    const timerEl = document.getElementById('timer');
    const progressBar = document.getElementById('progressBar');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const submitBtn = document.getElementById('submitBtn');
    const scoreEl = document.getElementById('score');
    const qIndexEl = document.getElementById('qIndex');
    const qTotalEl = document.getElementById('qTotal');
    const resultSection = document.getElementById('result');
    const resultTitle = document.getElementById('resultTitle');
    const resultSummary = document.getElementById('resultSummary');
    const playerNameInput = document.getElementById('playerName');
    const saveScoreBtn = document.getElementById('saveScoreBtn');
    const leaderboardTableBody = document.querySelector('#leaderboardTable tbody');
    const retryBtn = document.getElementById('retryBtn');
    const homeBtn = document.getElementById('homeBtn');

    // Initialize
    function init(){
      document.getElementById('qTotal').textContent = QUESTIONS.length;
      document.getElementById('qIndex').textContent = 0;
      attachEvents();
      renderLeaderboard();
    }

    function attachEvents(){
      startBtn.addEventListener('click', startQuiz);
      settingsBtn.addEventListener('click',()=>{
        const val = prompt('Waktu per soal (detik):', timePerQuestion);
        const n = parseInt(val);
        if(!isNaN(n) && n>5) timePerQuestion = n;
      });
      prevBtn.addEventListener('click', ()=>{ changeQuestion(qIndex-1); });
      nextBtn.addEventListener('click', ()=>{ changeQuestion(qIndex+1); });
      submitBtn.addEventListener('click', finishQuiz);
      saveScoreBtn.addEventListener('click', saveScore);
      retryBtn.addEventListener('click', ()=>{resetAll();startQuiz();});
      homeBtn.addEventListener('click', ()=>{resetAll();showStart();});
    }

    function startQuiz(){
      startPanel.style.display = 'none';
      resultSection.style.display = 'none';
      quizWrap.style.display = 'block';
      qIndex = 0; score = 0; answers = Array(QUESTIONS.length).fill(null);
      document.getElementById('score').textContent = score;
      changeQuestion(0);
    }

    function showStart(){ startPanel.style.display = 'block'; quizWrap.style.display='none'; }

    function changeQuestion(index){
      if(index<0) index = 0;
      if(index>=QUESTIONS.length) index = QUESTIONS.length-1;
      stopTimer();
      qIndex = index;
      renderQuestion();
      startTimer();
    }

    function renderQuestion(){
      const Q = QUESTIONS[qIndex];
      questionEl.textContent = Q.q;
      categoryEl.textContent = 'Kategori: ' + Q.category;
      optionsEl.innerHTML = '';
      Q.a.forEach((opt,i)=>{
        const div = document.createElement('div');
        div.className = 'option';
        div.tabIndex = 0;
        div.textContent = opt;
        div.dataset.index = i;
        if(answers[qIndex] === i) div.classList.add('selected');
        div.addEventListener('click', ()=>selectOption(i));
        div.addEventListener('keydown', (e)=>{ if(e.key === 'Enter' || e.key === ' ') selectOption(i); });
        optionsEl.appendChild(div);
      });
      document.getElementById('qIndex').textContent = qIndex+1;
      document.getElementById('qTotal').textContent = QUESTIONS.length;
      updateProgress();
    }

    function selectOption(optIndex){
      answers[qIndex] = optIndex;
      // update UI
      [...optionsEl.children].forEach(ch => ch.classList.remove('selected'));
      optionsEl.children[optIndex].classList.add('selected');
      // immediate feedback (optional): highlight correct/incorrect after selection
    }

    function startTimer(){
      timeLeft = timePerQuestion;
      timerEl.textContent = timeLeft;
      updateProgressBar();
      timer = setInterval(()=>{
        timeLeft -= 1;
        if(timeLeft<=0){
          clearInterval(timer);
          autoNext();
        }
        timerEl.textContent = timeLeft;
        updateProgressBar();
      },1000);
    }

    function stopTimer(){ if(timer) clearInterval(timer); timer = null; }

    function updateProgressBar(){
      const pct = ((timePerQuestion - timeLeft)/timePerQuestion)*100;
      progressBar.style.width = pct + '%';
    }

    function autoNext(){
      // jika belum menjawab, biarkan null (gagal)
      if(qIndex < QUESTIONS.length - 1){ changeQuestion(qIndex+1); }
      else { finishQuiz(); }
    }

    function updateProgress(){
      scoreEl.textContent = calculateScore();
    }

    function calculateScore(){
      let s = 0;
      answers.forEach((ans,i)=>{ if(ans === QUESTIONS[i].correct) s += 10; });
      return s;
    }

    function finishQuiz(){
      stopTimer();
      // calculate score
      score = calculateScore();
      document.getElementById('score').textContent = score;
      quizWrap.style.display = 'none';
      resultSection.style.display = 'block';
      resultTitle.textContent = `Skor Anda: ${score}`;
      const correctCount = answers.reduce((acc,ans,i)=> acc + (ans===QUESTIONS[i].correct?1:0),0);
      resultSummary.textContent = `Anda menjawab benar ${correctCount} dari ${QUESTIONS.length} soal.`;
      renderLeaderboard();
    }

    // Leaderboard (localStorage)
    const LB_KEY = 'cc_sma_leaderboard_v1';
    function getLeaderboard(){
      try{ const raw = localStorage.getItem(LB_KEY); return raw ? JSON.parse(raw) : []; }catch(e){ return []; }
    }
    function saveLeaderboard(list){ localStorage.setItem(LB_KEY, JSON.stringify(list)); }

    function saveScore(){
      const name = (playerNameInput.value || 'Anonim').trim();
      if(!name) return alert('Masukkan nama terlebih dahulu.');
      const list = getLeaderboard();
      list.push({name,score:score,at:Date.now()});
      list.sort((a,b)=>b.score - a.score || a.at - b.at);
      saveLeaderboard(list.slice(0,50));
      renderLeaderboard();
      alert('Skor tersimpan di leaderboard lokal.');
    }

    function renderLeaderboard(){
      const list = getLeaderboard();
      leaderboardTableBody.innerHTML = '';
      if(list.length === 0){ leaderboardTableBody.innerHTML = '<tr><td colspan="3" style="color:var(--muted)">Belum ada data.</td></tr>'; return; }
      list.forEach((it,idx)=>{
        const tr = document.createElement('tr');
        tr.innerHTML = `<td>${idx+1}</td><td>${escapeHtml(it.name)}</td><td>${it.score}</td>`;
        leaderboardTableBody.appendChild(tr);
      });
    }

    function escapeHtml(s){ return String(s).replace(/[&<>"']/g, (c)=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":"&#039;" }[c])); }

    function resetAll(){ stopTimer(); qIndex=0; score=0; answers = Array(QUESTIONS.length).fill(null); document.getElementById('score').textContent = 0; }

    // On page load
    init();
  </script>
</body>
</html>
